# AI æ•™æè½‰æ›å™¨ - å„ªåŒ–æ”¹é€²è¨ˆåŠƒ

> **æ–‡ä»¶ç‰ˆæœ¬**: 1.0  
> **å»ºç«‹æ—¥æœŸ**: 2025-12-01  
> **ç¨‹å¼ç¢¼è©•åˆ†**: 8.5/10 â­â­â­â­

---

## ğŸ“Š å„ªåŒ–é …ç›®ç¸½è¦½

| å„ªå…ˆç´š | é …ç›®æ•¸ | é ä¼°ç¸½å·¥æ™‚ | å½±éŸ¿ç¯„åœ |
|--------|--------|-----------|---------|
| ğŸ”´ é«˜å„ªå…ˆç´š | 4 é … | 9 å°æ™‚ | ç©©å®šæ€§ã€å®‰å…¨æ€§ |
| ğŸŸ¡ ä¸­å„ªå…ˆç´š | 4 é … | 14 å°æ™‚ | ç¨‹å¼ç¢¼å“è³ª |
| ğŸŸ¢ ä½å„ªå…ˆç´š | 5 é … | 19 å°æ™‚ | ç”¨æˆ¶é«”é©— |

---

## ğŸ”´ é«˜å„ªå…ˆç´šå„ªåŒ–

### 1. LocalStorage å®¹é‡é™åˆ¶è™•ç† (2h)

**å•é¡Œ**: LocalStorage 5-10MB é™åˆ¶ï¼Œå„²å­˜ Base64 åœ–ç‰‡æœƒå¿«é€Ÿè€—ç›¡ç©ºé–“

**è§£æ±ºæ–¹æ¡ˆ**:
```typescript
// services/projectService.ts
export const saveProject = (project: Project): void => {
  try {
    const projectData = JSON.stringify(project);
    const sizeInMB = new Blob([projectData]).size / (1024 * 1024);
    
    if (sizeInMB > 3) {
      console.warn(`âš ï¸ å°ˆæ¡ˆå¤§å°: ${sizeInMB.toFixed(2)}MB`);
    }
    
    localStorage.setItem(`project_${project.id}`, projectData);
  } catch (error) {
    if (error instanceof DOMException && error.name === 'QuotaExceededError') {
      throw new Error('ğŸ’¾ å„²å­˜ç©ºé–“ä¸è¶³ï¼è«‹åˆªé™¤èˆŠå°ˆæ¡ˆæˆ–æ¸›å°‘åœ–ç‰‡æ•¸é‡ã€‚');
    }
    throw error;
  }
};
```

---

### 2. API Key å®‰å…¨æ€§æ”¹é€² (4h)

**å•é¡Œ**: API Key æš´éœ²åœ¨å‰ç«¯ç¨‹å¼ç¢¼ä¸­

**æ–¹æ¡ˆ A - å¾Œç«¯ä»£ç†**:
```typescript
// backend/api/gemini.ts
export default async function handler(req, res) {
  const ai = new GoogleGenAI({ apiKey: process.env.GEMINI_API_KEY });
  const response = await ai.models.generateContent(req.body);
  res.json({ text: response.text });
}
```

**æ–¹æ¡ˆ B - ä½¿ç”¨è€…è‡ªè¡Œè¼¸å…¥**:
```typescript
// services/apiKeyService.ts
export const getUserApiKey = (): string | null => {
  return localStorage.getItem('user_gemini_api_key');
};
```

---

### 3. AI éŒ¯èª¤è™•ç†å„ªåŒ– (2h)

**æ”¹é€²**: è©³ç´°çš„éŒ¯èª¤åˆ†é¡

```typescript
catch (error: any) {
  if (error.status === 401) {
    throw new Error('ğŸ”‘ API Key ç„¡æ•ˆæˆ–æœªè¨­å®š');
  } else if (error.status === 429) {
    throw new Error('ğŸ“Š API é…é¡å·²ç”¨ç›¡');
  } else if (error.code === 'ETIMEDOUT') {
    throw new Error('â±ï¸ è«‹æ±‚è¶…æ™‚');
  }
  // ... æ›´å¤šéŒ¯èª¤é¡å‹
}
```

---

### 4. é˜²æŠ–æ©Ÿåˆ¶å„ªåŒ– (1h)

**æ”¹é€²**: ä½¿ç”¨è‡ªè¨‚ Hook

```typescript
// utils/hooks.ts
export function useDebounce<T extends (...args: any[]) => any>(
  callback: T,
  delay: number
): T {
  const timeoutRef = useRef<NodeJS.Timeout>();
  
  return useCallback((...args: Parameters<T>) => {
    if (timeoutRef.current) clearTimeout(timeoutRef.current);
    timeoutRef.current = setTimeout(() => callback(...args), delay);
  }, [callback, delay]) as T;
}
```

---

## ğŸŸ¡ ä¸­å„ªå…ˆç´šå„ªåŒ–

### 5. ç¨‹å¼ç¢¼é‡æ§‹ - åˆ†é›¢æ¥­å‹™é‚è¼¯ (6h)

**å•é¡Œ**: Editor.tsx 464 è¡Œéæ–¼é¾å¤§

**è§£æ±ºæ–¹æ¡ˆ**: ä½¿ç”¨è‡ªè¨‚ Hook
```typescript
// hooks/useProjectEditor.ts
export const useProjectEditor = (project: Project, onProjectChange) => {
  const [currentProject, setCurrentProject] = useState(project);
  
  const handleContentUpdate = useCallback((index, newContent) => {
    // é‚è¼¯è™•ç†
  }, [currentProject]);
  
  return { currentProject, handleContentUpdate, /* ... */ };
};
```

---

### 6. TypeScript å‹åˆ¥å®‰å…¨æ”¹é€² (3h)

**æ”¹é€²**: ä½¿ç”¨å‹åˆ¥å®ˆè¡›å–ä»£ any

```typescript
// types.ts
export const hasContent = (item: StructuredContentItem): item is ContentItem => {
  return 'content' in item;
};

// ä½¿ç”¨
if (hasContent(targetItem)) {
  targetItem.content = newContent; // å‹åˆ¥å®‰å…¨ âœ…
}
```

---

### 7. AI Prompt ç®¡ç†å„ªåŒ– (2h)

**æ”¹é€²**: é›†ä¸­ç®¡ç† Prompt

```typescript
// prompts/aiPrompts.ts
export const AI_PROMPTS = {
  SUGGESTIONS: {
    SYSTEM: 'æ‚¨æ˜¯ä¸€ä½å°ˆæ¥­çš„æ•™æè¨­è¨ˆå¸«...',
    RULES: ['è¦å‰‡1', 'è¦å‰‡2', '...'],
    template: (content: string) => `${SYSTEM}\n${RULES}\n${content}`
  }
};
```

---

### 8. åœ–ç‰‡å£“ç¸®åŠŸèƒ½ (3h)

**æ–°å¢**: è‡ªå‹•å£“ç¸®åœ–ç‰‡

```typescript
// utils/imageUtils.ts
export const compressImage = async (
  base64: string,
  maxWidth: number = 1200,
  quality: number = 0.8
): Promise<string> => {
  // Canvas å£“ç¸®é‚è¼¯
  return canvas.toDataURL('image/jpeg', quality);
};
```

---

## ğŸŸ¢ ä½å„ªå…ˆç´šå„ªåŒ–

### 9. è‡ªå‹•å„²å­˜æŒ‡ç¤ºå™¨ (1h)
- é¡¯ç¤ºå„²å­˜ç‹€æ…‹ï¼šå„²å­˜ä¸­ã€å·²å„²å­˜ã€éŒ¯èª¤

### 10. å¾©åŸ/é‡åšåŠŸèƒ½ (4h)
- ä½¿ç”¨ useHistory Hook å¯¦ä½œæ­·å²è¨˜éŒ„

### 11. æ¸¬è©¦è¦†è“‹ç‡ (8h)
- ä½¿ç”¨ Vitest + Testing Library

### 12. IndexedDB é·ç§» (6h)
- å¾ LocalStorage é·ç§»è‡³ IndexedDBï¼ˆå®¹é‡æ›´å¤§ï¼‰

### 13. ä¾è³´å¥—ä»¶å„ªåŒ– (2h)
- å®‰è£æ­£å¼ç‰ˆ Tailwind CSS
- åŠ å…¥åœ–ç‰‡å£“ç¸®å¥—ä»¶

---

## ğŸ“… åŸ·è¡Œæ™‚ç¨‹

### ç¬¬ä¸€éšæ®µ (Week 1-2) - é«˜å„ªå…ˆç´š
- [ ] LocalStorage éŒ¯èª¤è™•ç†
- [ ] AI éŒ¯èª¤è¨Šæ¯å„ªåŒ–
- [ ] é˜²æŠ–æ©Ÿåˆ¶æ”¹é€²

### ç¬¬äºŒéšæ®µ (Week 3-4) - ä¸­å„ªå…ˆç´š
- [ ] åœ–ç‰‡å£“ç¸®åŠŸèƒ½
- [ ] Editor.tsx é‡æ§‹
- [ ] TypeScript å‹åˆ¥æ”¹é€²

### ç¬¬ä¸‰éšæ®µ (Week 5-6) - API å®‰å…¨
- [ ] API Key å®‰å…¨æ€§è™•ç†
- [ ] AI Prompt ç®¡ç†

### ç¬¬å››éšæ®µ (Week 7-8) - é•·æœŸå„ªåŒ–
- [ ] IndexedDB é·ç§»
- [ ] æ¸¬è©¦è¦†è“‹ç‡
- [ ] å¾©åŸ/é‡åšåŠŸèƒ½

---

## ğŸ“Š å„ªåŒ–æ•ˆç›Šè©•ä¼°

| å„ªåŒ–é …ç›® | æ•ˆèƒ½ | ç©©å®šæ€§ | ç¶­è­·æ€§ |
|---------|------|--------|--------|
| LocalStorage è™•ç† | â­â­â­ | â­â­â­â­â­ | â­â­â­ |
| API Key å®‰å…¨ | - | â­â­â­â­â­ | â­â­â­ |
| éŒ¯èª¤è™•ç† | - | â­â­â­â­ | â­â­â­â­ |
| ç¨‹å¼ç¢¼é‡æ§‹ | â­â­ | â­â­â­ | â­â­â­â­â­ |
| åœ–ç‰‡å£“ç¸® | â­â­â­â­â­ | â­â­â­ | â­â­ |

---

**è©³ç´°ç¨‹å¼ç¢¼ç¯„ä¾‹è«‹åƒè€ƒ**: `C:\Users\04EMEDU\.gemini\antigravity\brain\607eea34-a554-4c4a-8503-76bd684952c4\optimization_recommendations.md`

**æœ€å¾Œæ›´æ–°**: 2025-12-01
